<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>云库-单品模型</title>
   	<link href="css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/yunku.css"/>
    <link href="css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="css/index.css"/>
	<link rel="stylesheet" href="css/jquery.mCustomScrollbar.css"/>
    <script src="js/jquery-1.12.1.min.js"></script>
    <script src="js/jquery.mCustomScrollbar.js"></script>
    <script src="js/intDOM.js" charset="utf-8"></script>
    <script src="js/jquery.cookie.js" charset="utf-8"></script>
    <script src="js/module/skp/core.js" charset="utf-8"></script>
    <script src="js/module/skp/skp.js" charset="utf-8"></script>
    <script src="js/module/core/main.js" charset="utf-8"></script>
    <script src="js/module/core/user.js" charset="utf-8"></script>
    <script src="//cdn.bootcss.com/juicer/0.6.14/juicer-min.js"></script> 	
    <script src="js/bootstrap.min.js"></script> 
    

    <style>
        .d00{
            width: 240px;
            height: 461px;
            background: gold;
            overflow: hidden;
        }
                .xiala p:hover{
        background:#f3d924;
        color:#fff;
        }
        ul li:hover {
        color:#f3d924;
        background: #fff !important;
        }
        ul li:hover a{
        	color:#F4D36C;
        }
        .danyou{
            padding: 0 4px;
        }
        .danyou_1a,.danyou_1b,.danyou_1c{
            height: 36px;
    line-height: 36px;
    text-align: CENTER;
    	background: url('images/xiala3.png') no-repeat center right !important;
		}
		.danyou_2 img{
    		width: 171px;
    		height:initial;
			
		}
		.form-group {
			display:block;
	        position: relative;
		    margin-bottom: 0px;
		    top: 0;
		}
		.input-group{
			z-index: 999;
			}

	.aladdin-content img{

	}	
	.btn-group>.btn-group{
		width:33%;
	}	 	
		
		.btn-group>.btn, .btn-group-vertical>.btn{
		width:100%;
		}
		#html .mCSB_container{
		    padding-bottom: 100px;
		} 
		.danyou{
		    position: relative;}
		.menu-one{
		    width: 300%;
		    position: absolute;
		    left: 0;
		}
		.menu-two{
		    width: 300%;
		    position: absolute;
		    left: -100% !important;
		} 
		.menu-three{
		    width: 300%;
		    position: absolute;
		    left: -200% !important;
		} 
		.btn-group button{
		    color: #0080cc;
			font-size:12px;
		}		
		.aladdin-link .form-group .glyphicon-search{
		font-size:12px;}
		.form-group{
			background: #fff;
		} 
		.form-group .input-group{
			padding: 0 1%;
		}  
		.form-group .input-group .glyphicon{
			color:#0080cc;
		}
		.input-group-addon{
			height:28px;
			padding: 0px 12px;
		}
		.form-group .form-control{ 
			height:28px;
			font-size:12px;
			padding: 0px 12px;
		}
    </style>

</head>
<body>
<div class="wrap-box">
	<div class="aladdin-link">
		<div class="btn-group">
			<button type="button" class="btn dropdown-toggle" data-toggle="dropdown">
			单品模型<span class="caret"></span>
			</button>
			<ul class="dropdown-menu" role="menu">
				<li><a href="pingmiantuku.html">平面图库</a></li>
				<li><a href="taocan.html">套餐</a></li>
				<li><a href="huxingku.html">户型库</a></li>
				<li><a href="moxingye.html">单品模型</a></li>
			</ul>
		</div>
		<div class="form-group">
	  		<div class="input-group">
	   			<div class="serach input-group-addon btn-default"><span class="glyphicon glyphicon-search"></span></div>
	   			<input class="form-control for-serach" type="text" onkeydown="if(event.keyCode==13) searchM()" placeholder="品牌名词/单品名称/应用场景">
	   			<div class="cancel input-group-addon btn-default"><span class="glyphicon glyphicon glyphicon-remove"></span></div>
	  		</div>
		</div>	
	</div>
	<div class="aladdin-content">
		<div class="col-xs-2">
	        <ul style="height: 512px;">
	            <li id="serach" style="display:none;"><a class="a1" href="#"><span class="glyphicon glyphicon-search"></span></a></li>
	            <li class="li4 active" ><a class="a2" href="#">全部</a></li>
	            <li class="li4"  ><a class="a3" href="#">客厅</a></li>
	            <li class="li4"  ><a class="a4" href="#">餐厅</a></li>
	            <li class="li4" ><a class="a5" href="#">主卧</a></li>
	            <li class="li4" ><a class="a6" href="#">次卧</a></li>
	            <li class="li4" ><a class="a7" href="#">厨房</a></li>
	            <li class="li4" ><a class="a8" href="#">阳台</a></li>
	            <li class="li4" ><a class="a9" href="#">卫生间</a></li>

	        </ul>
	    </div>
	    <div class="col-xs-10">
	        <div class="danyou" >
	       	<div class="btn-group" style="padding-left: 1%;width: 100%;">
				<div class="btn-group">
					<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
					  <span class="but-text">品牌</span>
					  <span class="caret"></span>
					</button>
					<ul class="dropdown-menu menu-one" role="menu">
					  <li><a href="#"><span class="menu-text">全部</span></a></li>
					  <li><a href="#">欧菲特</a></li>
					  <li><a href="#">双叶</a></li>
					  <li><a href="#">松堡王国</a></li>
					  <li><a href="#">汇创家具</a></li>
					  <li><a href="#">生活诚品</a></li>				  				  
					</ul>
				</div>
				<div class="btn-group">
					<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
					  <span class="but-text">风格</span>
					  <span class="caret"></span>
					</button>
					<ul class="dropdown-menu menu-two" role="menu">
					  <li><a href="#"><span class="menu-text">全部</span></a></li>
					  <li><a href="#">中式</a></li>
					  <li><a href="#">欧式</a></li>
					  <li><a href="#">中式</a></li>
					  <li><a href="#">欧式</a></li>				  
					</ul>
				</div>
			
				<div class="btn-group">
					<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
					  <span class="but-text">全部</span>
					  <span class="caret"></span>
					</button>
					<ul class="dropdown-menu menu-three" role="menu">
					  <li><a href="#"><span class="menu-text">全部</span></a></li>
					  <li gc_id="09ad2484aa394e32b206fe347e549eba"><a href="#">饰品</a></li>
					  <li gc_id="13dd3222a2a34f6d969584b14ac561bb"><a href="#">艺术之门</a></li>
					  <li gc_id="141fd6e85e6c4659b02cafb07efb7ffc"><a href="#">家具</a></li>
					  <li gc_id="333970b0f88c49dcb969346b22e9db4e"><a href="#">灯具</a></li>
					  <li gc_id="5a19724045354bbf96a52f63d2549e1b"><a href="#">精选产品配搭</a></li>
					  <li gc_id="5badda48bb1a41f99fed87977e192161"><a href="#">床垫</a></li>
					  <li gc_id="738ea026ffe741198407ae2d75d17f46"><a href="#">布艺</a></li>
					  <li gc_id="b751bba43f804664831cc665916166fd"><a href="#">装饰画</a></li>
					  <li gc_id="ba03bcc15e864cfc97d2b1dfe9cacfe2"><a href="#">花艺</a></li>
					  <li gc_id="f7f347fc4a5e43218fc2ef52192606a3"><a href="#">地毯</a></li>
					</ul>
				</div>
			</div>
	            <div class="danyou_1 row" style="display:none;">
	                <div class="danyou_1a col-xs-4">
	                    <p>品牌</p>
	                </div>
	                <div class="danyou_1b col-xs-4">
	                    <p>风格</p>
	                </div>
	                <div class="danyou_1c col-xs-4">
	                    <p>色系</p>
	                </div>
	            </div>
	            <div id="html">
	            </div>
	        </div>
	     	<div class="pager">
			    <div class="btn btn-default prev"><a href="#">上一页</a></div>
			    <span class="pager-page">
			    	<span class="now">1</span>/<span class="total">5</span>
			    </span>
			    <div class="btn btn-default next"><a href="#">下一页</a></div>
			</div>
		</div>
	</div>
</div>
<script id="tpl" type="text/template">
	{@each data as it,index}
		<div class="danyou_2" onclick="down_model('${it.id}')">
        	<img src="${it.thumb}" alt=""/>
            <h3>${it.name}</h3>
            <p>价格：<span>${it.unitprice}/元</span></p>
        </div>
	{@/each}
</script>
<script>
	var IsmCustomScrollbar = false; 
	var total = 0;//总行数
	var pageSize= 5; //每次请求行数
	//var totalPage = Math.floor(total/pageSize)+((total % pageSize)==0?0:1);//总页数
	var maxPages = 0;//总页数
	var pageNum = 1;//当前页数
	var categoryId ="";
	var style = '';
	var brand = '';
	var postData = {};
	postData.pageSize = pageSize;//每次请求行数
	postData.pageNo = pageNum;//当前页数
	postData.level = 'level1'; 
	postData.queryType = "public";
	intHtml(postData);
	function intHtml(data){
        var obj = data;
        var url = models_search_url;
        $.fn.mypost(url,obj,getUserToken(),function(response){
            //console.log(response);
            response = my_eval(response);
            pageNum = response.pageIndex;
            maxPages = response.maxPages;
            $('.pager-page .total').text(response.maxPages?response.maxPages:1);
            $('.pager-page .now').text(response.pageIndex);
            total = response.total;
            if(response.maxPages<=response.pageIndex){
            	$('.next').addClass('disabled');	
            }else{
            	$('.next').removeClass('disabled');
            }
            if(response.pageIndex==1){
            	$('.prev').addClass('disabled');	
            }else{
            	$('.prev').removeClass('disabled');
            }
            var tpl = document.getElementById('tpl').innerHTML;
            var html = juicer(tpl, response);
            if(IsmCustomScrollbar){
            	document.getElementById('mCSB_1_container').innerHTML = html; 
            }else{
                document.getElementById('html').innerHTML = html;         	
            }
            setTimeout("intHeight($(window).height());",100);
        });

	}
	function inCategory(){
		
	}

    function down_model(id){
        var obj = {"id":id};
        var url = models_get_url;
        $.fn.mypost(url,obj,getUserToken(),function(response){
            response = my_eval(response);
            if(response.code==200){
                if(!response.data[0].skp){
                    alert("没有模型");
                }else{               	
                    skp_down_yun_model(response.data[0].skp,response.data);
                    //暂时注掉加载等待效果
                     // begin_loading();
                     // setTimeout(end_loading,5000);
                }
            }else{
                alert("服务器错误");
            }
        });       
    }


$(".aladdin-content .col-xs-2 ul li").click(function () {
	$(".aladdin-content ul li").removeClass('active');
	$(this).addClass('active');
  	postData.zone = $(this).text();
  	if($(this).text()=='全部'){
  		delete postData.zone;
  	}
  	intHtml(postData);
})
//搜索
function searchM(){
  	postData.keyword = $('.for-serach').val();
  	if($('.for-serach').val()==''){
  		delete postData.keyword;
  	}
  	intHtml(postData);	
}
$(".input-group .serach").click(function () {
  	postData.keyword = $('.for-serach').val();
  	if($('.for-serach').val()==''){
  		delete postData.keyword;
  	}
  	intHtml(postData);
})
$(".input-group .cancel").click(function () {
	$('.for-serach').val('');
	delete postData.keyword;
  	intHtml(postData);
})
$('.btn-group .menu-one li').on('click', function (e) {
	//品牌
	debugger;
	brand = $(this).children().text();
	$(this).parent().parent().find('.but-text').text(brand);
	postData.brand = brand;
	if(brand=='全部'){
		delete postData.brand
		$(this).parent().parent().find('.but-text').text('品牌');
	}
	intHtml(postData);
});
	$('.btn-group .menu-two li').on('click', function (e) {
	//风格
	debugger;
	style = $(this).children().text();
	$(this).parent().parent().find('.but-text').text(style);
	postData.style = style;
	if(style=='全部'){
		delete postData.style
		$(this).parent().parent().find('.but-text').text('风格');
	}
	intHtml(postData);
});
$('.btn-group .menu-three li').on('click', function (e) {
	//分类
	debugger;
	var categoryText = $(this).children().text();
	categoryId =$(this).attr('gc_id');
	$(this).parent().parent().find('.but-text').text(categoryText);
	postData.categoryId = categoryId;
	if(categoryText=='全部'){
		delete postData.categoryId
		$(this).parent().parent().find('.but-text').text('全部');
	}
	intHtml(postData);
});	
$('.prev').on('click', function (e) {
	//上一页
	debugger;
	pageNum--;
	postData.pageNo = pageNum;
	intHtml(postData);
	});
$('.next').on('click', function (e) {
	//下一页
	debugger;
	pageNum++;
	postData.pageNo = pageNum;
	intHtml(postData);
	});	
setTimeout("intHtml(postData);",100);

<!--下拉-->
$(function(){
    $(".ss1").click(function () {
        $(".xiala").toggle()
        $(".form-group").hide();
    })
    
    //$(".aladdin-content .li").click(function () {
        //$(".form-group").hide();
    //})
    $(".d00_a1").click(function () {
        $(".xiala").toggle();
        $(".form-group").hide();
    })
})
$(function(){
    $(".ss1").click(function () {
        $(".ss2").toggle()
        $(".form-group").hide();
    })
    $(".d00_a1").click(function () {
        $(".ss2").toggle()
        $(".form-group").hide();
    })
    $("#serach").click(function () {
        $(".form-group").toggle()
    })
    
})
$(document).ready(function(){ 
	intDOM();
	}); 
</script>


</body>
</html>