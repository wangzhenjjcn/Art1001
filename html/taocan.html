<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>云库-套餐</title>
    <link rel="stylesheet" href="css/yunku.css"/>
    <link href="css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="css/index.css"/>
	<link rel="stylesheet" href="css/jquery.mCustomScrollbar.css"/>
    <script src="js/jquery-1.12.1.min.js"></script>
    <script src="js/jquery.mCustomScrollbar.js"></script>
    <script src="js/jquery.cookie.js" charset="utf-8"></script>
    <script src="js/intDOM.js" charset="utf-8"></script>
    <script src="js/module/core/main.js" charset="utf-8"></script>
    <script src="js/module/core/user.js" charset="utf-8"></script>
    <script src="//cdn.bootcss.com/juicer/0.6.14/juicer-min.js"></script>
    <script src="js/module/skp/core.js" charset="utf-8"></script>
   	<script src="js/bootstrap.min.js"></script>
	<script src="js/module/skp/skp.js" charset="utf-8"></script>
    <style>
        .d00{
            width: 240px;
            height: 461px;
            background: gold;
            overflow: hidden;
        }
        #html img{
       		width: 200px;
    		height: 200px;
        }
        .taoxia_1{

        }
        .xiala p:hover{
        background:#f3d924;
        color:#fff;
        }
        .taoxia_wrap{
        text-align:center;
        }
        .taoxia{
        background:#E7ECEA;
        }

     	.aladdin-content .taoxia_1{
    			background:#fff;
		    	height:36px;
		    }
		    #html{
		    }
		    .taoxia_2a {
		    width: 200px;
		    margin: auto;
		    margin-bottom: 8px;
		    }
		    #html {
    padding-bottom: 0;}
	.btn-group>.btn-group{
		width:33%;
	}	 	
		
		.btn-group>.btn, .btn-group-vertical>.btn{
		width:100%;
		}
		
   		.menu-one{
		    width: 300%;
		    position: absolute;
		    left:0 !important;
		}
		.menu-two{
		    width: 300%;
		    position: absolute;
		    left: -100% !important;
		} 
		.menu-three{
		    width: 300%;
		    position: absolute;
		    left: -200% !important;
		}
		.menu-four{
		    width: 300%;
		    position: absolute;
		    left: -300% !important;
		}
		.btn-group button{
			font-size:12px;
		}		
    </style>
</head>
<body>
<div class="aladdin-link">
	<div class="btn-group">
		<button type="button" class="btn dropdown-toggle" data-toggle="dropdown">
		套餐 <span class="caret"></span>
		</button>
		<ul class="dropdown-menu" role="menu">
			<li><a href="pingmiantuku.html">平面图库</a></li>
			<li><a href="taocan.html">套餐</a></li>
			<li><a href="huxingku.html">户型库</a></li>
			<li><a href="moxingye.html">单品模型</a></li>
		</ul>
	</div>	
</div>
<div class="aladdin-content">
    <div class="taoxia">
			<div class="btn-group" style="padding-left: 1%;width: 100%;">   	       	
				<div class="btn-group">
					<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
					  <span class="but-text">面积</span>
					  <span class="caret"></span>
					</button>
					<ul class="dropdown-menu menu-one" role="menu">
					  <li><a href="#"><span class="menu-text">全部</span></a></li>
					  <li><a href="#"><span class="menu-text">1-59㎡</span></a></li>	
					  <li><a href="#"><span class="menu-text">1-59㎡</span></a></li>					
					  <li><a href="#"><span class="menu-text">60-80㎡</span></a></li>
					  <li><a href="#"><span class="menu-text">81-105㎡</span></a></li>
					  <li><a href="#"><span class="menu-text">106-120㎡</span></a></li>
					  <li><a href="#"><span class="menu-text">121-150㎡</span></a></li>
					  <li><a href="#"><span class="menu-text">151-220㎡</span></a></li>	
					  <li><a href="#"><span class="menu-text">221-250㎡</span></a></li>
					  <li><a href="#"><span class="menu-text">251-300㎡</span></a></li>	
					  <li><a href="#"><span class="menu-text">301-500㎡</span></a></li>
					  <li><a href="#"><span class="menu-text">501-1000㎡</span></a></li>	
					  <li><a href="#"><span class="menu-text">其他</span></a></li>
					  					  					  			  				  
					</ul>
				</div>
				<div class="btn-group">
					<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
					  <span class="but-text">风格</span>
					  <span class="caret"></span>
					</button>
					<ul class="dropdown-menu menu-two" role="menu">
					  <li><a href="#"><span class="menu-text">全部</span></a></li>
					  <li><a href="#"><span class="menu-text">中式</span></a></li>
					  <li><a href="#"><span class="menu-text">欧式</span></a></li>
					  <li><a href="#"><span class="menu-text">中式</span></a></li>
					  <li><a href="#"><span class="menu-text">欧式</span></a></li>				  
					</ul>
				</div>
			
				<div class="btn-group">
					<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
					  <span class="but-text">价格</span>
					  <span class="caret"></span>
					</button>
					<ul class="dropdown-menu menu-three" role="menu">
					  <li><a href="#"><span class="menu-text">全部</span></a></li>
					  <li><a href="#"><span class="menu-text">1-2000</span></a></li>
					  <li><a href="#"><span class="menu-text">1-2000</span></a></li>
					  <li><a href="#"><span class="menu-text">2001-4000</span></a></li>
					  <li><a href="#"><span class="menu-text">4001-6000</span></a></li>
					  <li><a href="#"><span class="menu-text">6001-8000</span></a></li>
					  <li><a href="#"><span class="menu-text">10001-12000</span></a></li>
					  <li><a href="#"><span class="menu-text">12001-14000</span></a></li>
					  <li><a href="#"><span class="menu-text">14001-16000</span></a></li>
					  <li><a href="#"><span class="menu-text">16001-18000</span></a></li>	
					  <li><a href="#"><span class="menu-text">18001-20000</span></a></li>
					  <li><a href="#"><span class="menu-text">20001-22000</span></a></li>						  							  					  
					</ul>
				</div>
			</div>
    	<div id="html"></div>
    </div>
	     	<div class="pager">
			    <div class="btn btn-default prev"><a href="#">上一页</a></div>
			    <span class="pager-page">
			    	<span class="now">1</span>/<span class="total">5</span>
			    </span>
			    <div class="btn btn-default next"><a href="#">下一页</a></div>
			</div>
</div>
<script id="tpl" type="text/template">
	{@each data as it,index}


		<div class="${'taoxia_wrap'}" onclick="down_taocan('${it.id}')">
			<img src="${it.effect}" alt=""/>
		</div>
		<div class="taoxia_2a ${'taoxia_wrap'}" onclick="down_taocan('${it.id}')">
			<p class="p1">面积：<span>${it.area} m&sup2</span> 风格：<span>${it.style}</span></p>
			<p class="p2">价格：<span>${it.unitprice}万</span></p>
		</div>
		
	{@/each}
</script>
<script>
 	var IsmCustomScrollbar = false; 
	var total = 0;//总行数
	var pageSize= 5; //每次请求行数
	var totalPage = Math.floor(total/pageSize)+((total % pageSize)==0?0:1);//总页数
	var pageNum = 1;//当前页数
	var area = ''; //面积
	var style = ''; //风格
	var unitprice = 0;//价格
	var postData = {};
	postData.pageSize = pageSize;//每次请求行数
	postData.pageNum = pageNum;//当前页数	
	function intHtml(data){	
        //var obj =JSON.stringify(data);
        var obj =data;
        //var obj ={};
        var url = packages_all_url;
        $.fn.mypost(url,obj,getUserToken(),function(response){
            //console.log(response);
            response = my_eval(response);
            pageNum = response.pageIndex;
            total = response.total;
            $('.pager-page .total').text(response.maxPages?response.maxPages:1);
            $('.pager-page .now').text(response.pageIndex);
            if(response.maxPages<=response.pageIndex){
            	$('.next').addClass('disabled');	
            }else{
            	$('.next').removeClass('disabled');
            }
            if(response.pageIndex==1){
            	$('.prev').addClass('disabled');	
            }else{
            	$('.prev').removeClass('disabled');
            }
            var tpl = document.getElementById('tpl').innerHTML;
            var html = juicer(tpl, response);
            if(IsmCustomScrollbar){
            	document.getElementById('mCSB_1_container').innerHTML = html; 
            }else{
                document.getElementById('html').innerHTML = html;         	
            }
            setTimeout("intHeight($(window).height());",100);
        });
	}
	$('.all').on('click', function (e) {
		//删除所有筛选条件（得到全部套餐）
		postData={};
		postData.pageSize = pageSize;
		intHtml(postData);
		});
	$('.btn-group .menu-one li').on('click', function (e) {
		//面积
		debugger;
		area = $(this).children().text();
		$(this).parent().parent().find('.but-text').text(area);
		postData.area = area;
		if(area=='全部'){
			delete postData.area
			$(this).parent().parent().find('.but-text').text('面积');
		}
		intHtml(postData);
		});
	$('.btn-group .menu-two li').on('click', function (e) {
		//风格
		debugger;
		style = $(this).children().text();
		$(this).parent().parent().find('.but-text').text(style);
		postData.style = style;
		if(style=='全部'){
			delete postData.style
			$(this).parent().parent().find('.but-text').text('风格');
		}
		intHtml(postData);
		});
	$('.btn-group .menu-three li').on('click', function (e) {
		//价格
		debugger;
		unitprice = $(this).children().text();
		$(this).parent().parent().find('.but-text').text(unitprice);
		postData.unitprice = unitprice;
		if(unitprice=='全部'){
			delete postData.unitprice
			$(this).parent().parent().find('.but-text').text('价格');
		}
		intHtml(postData);
		});
	$('.prev').on('click', function (e) {
		//上一页
		debugger;
		pageNum--;
		postData.pageNum = pageNum;
		intHtml(postData);
		});
	$('.next').on('click', function (e) {
		//下一页
		debugger;
		pageNum++;
		postData.pageNum = pageNum;
		intHtml(postData);
		});	
	setTimeout("intHtml(postData);",100);
	
    function down_taocan(id) {	
        var obj = {"id": id};
        var url = packages_get_url;
        $.fn.mypost(url, obj, getUserToken(), function (response) {                 
            response = my_eval(response);
            if (response.code == 200) {
                if (response.packages.id != null) {
                    skp_down_home_package(response);
                } else {
                    alert("没有这个套餐")
                }
            } else {
                alert("下载套餐失败");
            }
        });
    }
    $(document).ready(function(){ 
    	intDOM();
    	}); 
</script>
</body>
</html>